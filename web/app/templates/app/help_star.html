{% extends 'app/base.html' %}

{% block container %}
<div class="container">
    <div class="page-header">
        <h1>星店长助力</h1>
    </div>
    {% comment %} <div class="alert alert-info" role="alert">
        <p>商圈助力有每日上限，为 5 次。</p>
    </div> {% endcomment %}
    <div style="text-align:right; margin-bottom: 9px">
        <span>只加载 </span>
        <div class="btn-group" role="group" aria-label="num">
            {% for i in '12345'|make_list %}
            <button type="button" class="btn btn-default"
                onclick="javascrtpt:window.location.href='{% url 'help_star' %}?num={{ i }}'">{{ i }}
            </button>
            {% endfor %}
        </div>
        <span> 条链接</span>
    </div>
    <table class="table" style="table-layout:fixed; word-break:break-all;">
        <thead>
            <tr>
                <th width="70%">星店长ID</th>
                <th width="15%">今日星店长助力次数</th>
                <th width="15%">今日星店长被助力次数</th>
            </tr>
        </thead>
        <tbody>
            {% for user in user_list %}
            <tr>
                <td>{{ user.extension.star }}</td>
                <td>{{ user.extension.star_help_num }}</td>
                <td>{{ user.extension.star_be_helped_num }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div style="text-align:right">
        <button class="btn btn-primary" data-clipboard-text="{{ url }}">复制所有星店长助力链接</button>
    </div>
    <form class="form-login" action="{% url 'help_star' %}" method="post">
        {% csrf_token %}
        <input type="hidden" name="id_list" value="{{ id_list }}">
        <div class="checkbox">
            <label>
                <input type="checkbox" required="required">我确认已经完成助力了
            </label>
        </div>
        <button type="submit" class="btn btn-lg btn-primary btn-block" type="submit">完成</button>
    </form>
</div>

{% load static %}
<script src="{% static 'app/clipboard.min.js' %}"></script>
<script>
    var clipboard = new ClipboardJS('.btn');
    clipboard.on('success', function (e) {
        alert('已复制到粘贴板')
        e.clearSelection();
    });
</script>
{% endblock container %}